machine:
  services:
    - docker
  node:
    version: 9.11.1
dependencies:
  override:
    - "docker info"
    - "npm ci"
    - "./circle-environment.sh npm run build"
test:
  override:
    - "echo 'You shall pass!'"
deployment:
  production:
    branch: master
    commands:
      - "docker login -u=$DOCKER_USERNAME -p=$DOCKER_PASSWORD -e=$DOCKER_EMAIL"
      - "./push_to_hub.sh"
  staging:
    branch: devel
    commands:
      - "docker login -u=$DOCKER_USERNAME -p=$DOCKER_PASSWORD -e=$DOCKER_EMAIL"
      - "./push_to_hub.sh"

